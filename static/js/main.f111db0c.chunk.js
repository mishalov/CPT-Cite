(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,n){e.exports=n(314)},173:function(e,t,n){},175:function(e,t,n){},179:function(e,t,n){},183:function(e,t,n){},285:function(e,t,n){},289:function(e,t,n){},311:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var a,r,i,l,o,s,c,u,h,f,p,b,m,d,v,O,y,g,w,j,k,F,E=n(1),x=n.n(E),_=n(8),N=n.n(_),A=(n(173),n(12)),S=n(22),P=n(24),C=n(23),z=n(25),I=(n(175),n(177),n(179),n(9)),D=n.n(I),M=n(17),L=n(329),U=n(320),B=n(321),T=n(326),R=n(322),G=n(327),q=(n(183),n(20)),J=Object(q.b)("store")(a=Object(q.c)(a=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.key,n=e.store,a=e.audio,r=e.playFile;return x.a.createElement(V,{key:t,audio:a,playFile:r,isNow:n.FilesStore.playNow&&n.FilesStore.playNow.fullPath===a.fullPath})}}]),t}(x.a.Component))||a)||a,V=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.key,n=e.isNow,a=e.audio,r=e.playFile;return x.a.createElement("div",{className:"audio-item ".concat(n&&"now"),key:t,onClick:function(){return r(a.fullPath)}},x.a.createElement("div",{className:"audio-item__art",style:{marginRight:"12px"}}),x.a.createElement("div",{className:"audio-item__info"},x.a.createElement("p",{className:"audio-item__title"},a.title),x.a.createElement("p",{className:"audio-item__bandName"},a.author)))}}]),t}(x.a.PureComponent),W=J,$=n(231),H=n(236),K=n(34),Q=T.a.Panel,X=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.folder,n=e.content;return x.a.createElement($.a,{type:"flex",justify:"center",align:"middle",className:"folder-item"},x.a.createElement(H.a,{span:24},x.a.createElement(T.a,null,x.a.createElement(Q,{header:x.a.createElement("div",{className:"folder-item__header"},x.a.createElement(K.a,{className:"folder-item__icon",type:"folder"}),x.a.createElement("div",{className:"folder-item__title"},t.title)),key:"1"},n))))}}]),t}(x.a.PureComponent),Y=0,Z=function(){return Y++},ee=(T.a.Panel,Object(q.b)("store")(r=Object(q.c)(r=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={playlist:[]},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFiles()}},{key:"makeList",value:function(e){var t=this;if(e.files&&e.files.length>0)return e.files.map(function(e){return t.makeItem(e)})}},{key:"makeItem",value:function(e){if("File"===e.type){var t=e.content;return x.a.createElement(W,{audio:t,key:Z(),playFile:this.props.playFile})}var n=e.content,a=this.makeList(n);if(a&&a.filter(function(e){return e}).length>0)return x.a.createElement(X,{key:Z(),content:a,folder:e})}},{key:"render",value:function(){return this.props.files?x.a.createElement("div",{className:"playlist"},this.makeList(this.props.files)):x.a.createElement(R.a,{itemLayout:"horizontal",renderItem:function(e){return x.a.createElement(R.a.Item,{className:"audio-item"},x.a.createElement(G.a,{active:!0,paragraph:{rows:0,width:100}}))},dataSource:[1,2,3,4,5]})}}]),t}(x.a.Component))||r)||r),te=Object(q.c)(ee),ne=n(161),ae=n.n(ne),re=n(115),ie=n(287),le=n(323),oe=n(328),se=n(116),ce=n(117),ue=(n(285),function e(){Object(A.a)(this,e),this.files=[]}),he=function e(t,n,a,r){Object(A.a)(this,e),this.title=void 0,this.type=void 0,this.content=void 0,this.itemId=void 0,this.title=t,this.type=n,this.content=a,this.itemId=r},fe=n(15),pe=n(16),be=(n(104),n(11)),me=(i=function e(t,n,a,r,i){Object(A.a)(this,e),this.title=void 0,this.album=void 0,this.author=void 0,this.fullPath=void 0,Object(fe.a)(this,"duration",l,this),this.title=t,this.album=n,this.author=a,this.duration=r,this.fullPath=i},l=Object(pe.a)(i.prototype,"duration",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i),de=function e(t,n,a){Object(A.a)(this,e),this.audio=void 0,this.fullPath=void 0,this.URL=void 0,this.audio=t,this.fullPath=n,this.URL=a},ve=function e(t){Object(A.a)(this,e),this.userName=void 0,this.userName=t},Oe=function e(t){var n=this;Object(A.a)(this,e),this.client=void 0,this.cloudSource="DropBox",this.mapOfFiles=[],this.mode=void 0,this.checkspace=void 0,this.normalize=function(e){var t=new ue;return e.filter(function(e){return"folder"===e[".tag"]}).map(function(e){return e.path_lower.split("/").filter(function(e){return e})}).sort(function(e,t){return e.length>t.length?1:e.length===t.length?0:-1}).forEach(function(e){var n=t;e.forEach(function(e){var t=new ue;if(n.files){var a=n.files.find(function(t){return t.title===e});a?n=a.content:(n.files.push(new he(e,"Folder",t)),n=t)}else n.files=[new he(e,"Folder",t)],n=t})}),e.filter(function(e){return"file"===e[".tag"]&&e.name.lastIndexOf(".mp3")===e.name.length-4}).map(function(e){return e.path_lower.split("/").filter(function(e){return e})}).sort(function(e,t){return e.length>t.length?1:e.length===t.length?0:-1}).forEach(function(a){var r=t,i="/"+a.join("/"),l=e.find(function(e){return e.path_lower===i}),o=new he(l.name,"File",new me(l.name,a[a.length-2],a[a.length-2],300,i));n.mapOfFiles.push(o),a.forEach(function(e,t){1===a.length||a.length-1===t?r.files?r.files.push(o):r.files=[o]:r=r.files.find(function(t){return t.title===e}).content})}),t},this.getAllFiles=Object(M.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.filesListFolder({recursive:!0,path:""});case 2:if(t=e.sent){e.next=5;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432!");case 5:return a=n.normalize(t.entries),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)})),this.playFile=function(){var e=Object(M.a)(D.a.mark(function e(t){var a,r,i,l,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("/"),r=a[a.length-2],e.next=4,n.client.filesGetTemporaryLink({path:t});case 4:return i=e.sent,l=i.metadata,o=new me(l.name,r,r,0,i.metadata.path_lower||""),e.abrupt("return",new de(o,l.path_lower||"",i.link));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getNext=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=n.mapOfFiles.findIndex(function(e){return e.content.fullPath===t}))===n.mapOfFiles.length-1?0:a+1,e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getPrev=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0===(a=n.mapOfFiles.findIndex(function(e){return e.content.fullPath===t}))?0:a-1,e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.authorize=function(){},this.getMe=Object(M.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.usersGetCurrentAccount();case 2:return t=e.sent,e.abrupt("return",new ve(t.name.display_name));case 4:case"end":return e.stop()}},e,this)})),this.getAllFilesAlbums=Object(M.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getAllFiles();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),this.client=t,this.mode="",this.checkspace="album"},ye=function e(t){var n=this;Object(A.a)(this,e),this.client=void 0,this.cloudSource="OneDrive",this.mapOfFiles=[],this.mode=void 0,this.checkspace=void 0,this.filesetFiles=void 0,this.playingAlbum=void 0,this.normalize=function(){var e=Object(M.a)(D.a.mark(function e(t){var a,r,i,l,o,s,c;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=new ue).files=[],!t.children){e.next=24;break}r=t.children.filter(function(e){return e.folder||e.audio}).sort(function(e,t){return e.folder&&t.audio?0:e.folder&&t.folder?0:1}),i=0;case 5:if(!(i<r.length)){e.next=24;break}if(!(l=r[i]).folder){e.next=20;break}return e.next=10,n.client.api("/me".concat(l.parentReference.path,"/").concat(l.name)).expand("children").get();case 10:return o=e.sent,e.t0=he,e.t1=l.name,e.next=15,n.normalize(o);case 15:e.t2=e.sent,s=new e.t0(e.t1,"Folder",e.t2),a.files.push(s),e.next=21;break;case 20:l.audio&&(c=new he(l.name,"File",new me(l.audio.title||l.name,l.audio.album||t.name,l.audio.artist||t.name,l.audio.duration/1e3,l["@microsoft.graph.downloadUrl"]),l.id),n.mapOfFiles.push(c),a.files.push(c));case 21:i++,e.next=5;break;case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.normalizeAlbums=Object(M.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n.mapOfFiles.forEach(function(e){var n=e.content;t.find(function(e){return e.title===n.author})||t.push(new he(n.author,"Folder",new ue))}),t.forEach(function(e){var t=new ue;n.mapOfFiles.forEach(function(n){var a=n.content;t.files.find(function(e){return e.title===a.album})||a.author!==e.title||t.files.push(new he(a.album,"Folder",new ue))}),e.content=t}),n.mapOfFiles.forEach(function(e){var n=e.content,a=t.find(function(e){return e.title===n.author});if(a){var r=a.content.files.find(function(e){return e.title!==n.album});r?r.content.files.push(e):a.content.files.push(e)}else t.push(e)}),(a=new ue).files=t,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)})),this.getAllFiles=Object(M.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.filesetFiles){e.next=4;break}return e.abrupt("return",n.filesetFiles);case 4:return e.next=6,n.client.api("/me/drive/root:/music").expand("children").get();case 6:return t=e.sent,n.mapOfFiles=[],e.next=10,n.normalize(t);case 10:return a=e.sent,n.filesetFiles=a,e.next=14,a;case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,this)})),this.playFile=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.mapOfFiles.find(function(e){return e.content.fullPath===t}),n.client.api("/me/drive/items/".concat(a.itemId,"/thumbnails")).select("small").get(),e.abrupt("return",new de(a.content,t,t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.authorize=function(){},this.getMe=Object(M.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.api("/me").get();case 2:return t=e.sent,e.abrupt("return",new ve(t.displayName||t.givenName+" "+t.surname));case 4:case"end":return e.stop()}},e,this)})),this.getNext=function(){var e=Object(M.a)(D.a.mark(function e(t){var a,r,i,l,o,s;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.mapOfFiles.findIndex(function(e){return e.content.fullPath===t}),e.t0=n.mode,e.next=""===e.t0?4:"repeat"===e.t0?6:"shuffle"===e.t0?14:23;break;case 4:return a=a===n.mapOfFiles.length-1?0:a+1,e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 6:if("album"!==n.checkspace){e.next=13;break}return r=n.getPlayingAlbum(t,n.filesetFiles),i=(i=r.files.findIndex(function(e){return e.content.fullPath===t}))>=r.files.length-1?0:i+1,e.abrupt("return",n.playFile(r.files[i].content.fullPath));case 13:return e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 14:if("album"!==n.checkspace){e.next=21;break}return l=n.getPlayingAlbum(t,n.filesetFiles),l.files.findIndex(function(e){return e.content.fullPath===t}),o=Math.floor(Math.random()*l.files.length),e.abrupt("return",n.playFile(l.files[o].content.fullPath));case 21:return s=n.mapOfFiles[Math.floor(Math.random()*n.mapOfFiles.length)],e.abrupt("return",n.playFile(s.content.fullPath));case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getPrev=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0===(a=n.mapOfFiles.findIndex(function(e){return e.content.fullPath===t}))?0:a-1,e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getPlayingAlbum=function(e,t){for(var a=0;a<t.files.length;a++)if("File"===t.files[a].type){if(t.files[a].content.fullPath===e){var r=new ue;return r.files=t.files.filter(function(e){return"Folder"!==e.type}),r}}else{var i=n.getPlayingAlbum(e,t.files[a].content);if(i.files.length>0)return i}return new ue},this.getAllFilesAlbums=Object(M.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.normalizeAlbums();case 2:return t=e.sent,n.filesetFiles=t,e.next=6,t;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),this.client=t,this.mode="",this.checkspace="album"},ge=Object(q.b)("store")(o=Object(q.c)(o=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={OAuthUrl:""},n.authorizedByDropbox=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.props.store.FilesStore,localStorage.setItem("access_token",t.access_token),a.setClient(new Oe(new re.Dropbox({accessToken:t.access_token})));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.authorizedByOneDrive=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.store.FilesStore,n.props.store.AuthStore,(a=localStorage.getItem("access_token")||t.access_token)&&localStorage.setItem("access_token",a),t.id_token&&localStorage.setItem("id_token",t.id_token);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleOnedriveAuth=function(){localStorage.setItem("cloudSource","OneDrive"),new se.UserAgentApplication("b07f11e5-8934-40a1-a327-1859322ed1c6",null,function(){}).loginRedirect(["files.read.all"])},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.store,n=t.AuthStore,a=t.FilesStore,r=new re.Dropbox({clientId:"7174q8sh3aiss51"}),i=r.getAuthenticationUrl("http://localhost:3000/auth");i&&this.setState({OAuthUrl:i});var l=localStorage.getItem("access_token"),o=localStorage.getItem("cloudSource");l&&"Dropbox"===o&&(n.setLoading(!0),r.setAccessToken(l),r.usersGetCurrentAccount().then(function(t){n.setLoading(!1),n.setIsAuthed(),a.setClient(new Oe(r)),e.props.history.push("/")}).catch(function(e){n.setLoading(!1)}));var s=localStorage.getItem("access_token");s&&"OneDrive"===o&&(a.setClient(new ye(ce.Client.init({authProvider:function(e){e(null,s)}}))),n.setIsAuthed(),this.props.history.push("/"));var c=new se.UserAgentApplication("b07f11e5-8934-40a1-a327-1859322ed1c6",null,function(){});if(!localStorage.getItem("id_token")||s&&"OneDrive"===o||c.acquireTokenSilent(["files.read.all"]).then(function(){var t=Object(M.a)(D.a.mark(function t(r){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem("access_token",r),a.setClient(new ye(ce.Client.init({authProvider:function(e){e(null,r)}}))),n.setIsAuthed(),e.props.history.push("/");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f access_token Onedrive",e)}),this.props.location.hash){var u=ae.a.parse(this.props.location.hash);switch(localStorage.getItem("cloudSource")){case"Dropbox":this.authorizedByDropbox(u);case"OneDrive":this.authorizedByOneDrive(u)}}}},{key:"render",value:function(){var e=this.props.store.AuthStore;return x.a.createElement("div",{className:"auth-container"},x.a.createElement(le.a,{className:"auth-container__authbox",title:"\u0412\u0445\u043e\u0434",loading:e.loading},x.a.createElement("p",null,"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435! \u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0412\u0430\u0448\u0435\u043c\u0443 \u043e\u0431\u043b\u0430\u043a\u0443 \u043d\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435."," "),x.a.createElement("p",null,"\u041c\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0438\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ",x.a.createElement("b",null,"OneDrive")," \u0442.\u043a \u043e\u043d \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0435\u0442\u0430\u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u0444\u0430\u0439\u043b\u0430\u043c (\u0430\u043b\u044c\u0431\u043e\u043c, \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043e\u0440, \u043e\u0431\u043b\u043e\u0436\u043a\u0430 \u0438 \u0442.\u0434)"),x.a.createElement(oe.a,{className:"auth-container__button",onClick:function(){localStorage.setItem("cloudSource","Dropbox")},type:"primary",href:this.state.OAuthUrl},x.a.createElement(K.a,{type:"dropbox"}),"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Dropbox"),x.a.createElement(oe.a,{className:"auth-container__button",type:"primary",onClick:this.handleOnedriveAuth},x.a.createElement(K.a,{type:"windows"}),"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 OneDrive")))}}]),t}(x.a.Component))||o)||o,we=Object(q.b)("store")(Object(ie.a)(ge)),je=n(246),ke=n(64),Fe=n(325),Ee=(n(289),n(163)),xe=n.n(Ee),_e=function(e){var t=Math.trunc(e),n=t%60;return"".concat(Math.floor(t/60),":").concat(n<10?"0"+n:n)},Ne=n(58),Ae=Object(q.b)("store")(s=Object(q.c)(s=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={progress:{played:0,playedSeconds:0,loaded:0,loadedSeconds:0},repeat:{value:"",title:""},shuffle:{value:"",title:""},volume:50,playback:0},n.player=void 0,n.handleChangeVolume=function(e){n.setState({volume:Number(e)})},n.handleChangeMode=function(e){var t=n.props.store;if(Ne.isMobile&&"song"===n.state[e].value&&"shuffle"==e)return e="repeat",n.setState({repeat:{title:"\u0430\u043b\u044c\u0431\u043e\u043c",value:"album"}}),t.FilesStore.client.mode=e,void(t.FilesStore.client.checkspace="album");var a={title:"",value:""},r={title:"",value:""};switch(t.FilesStore.client.mode=e,n.state[e].value){case"":n.setState(Object(ke.a)({repeat:a,shuffle:r},e,{title:"\u0430\u043b\u044c\u0431\u043e\u043c",value:"album"})),t.FilesStore.client.checkspace="album";break;case"album":n.setState(Object(ke.a)({repeat:a,shuffle:r},e,{title:"\u043f\u0435\u0441\u043d\u044f",value:"song"})),t.FilesStore.client.checkspace="song";break;case"song":n.setState(Object(ke.a)({repeat:a,shuffle:r},e,{value:"",title:""})),t.FilesStore.client.checkspace="",t.FilesStore.client.mode="";break;default:n.setState(Object(ke.a)({repeat:a,shuffle:r},e,{value:"",title:""}))}},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store.FilesStore;return x.a.createElement("div",{className:"player",style:{marginBottom:"12px"}},x.a.createElement(xe.a,{ref:function(t){return e.player=t},style:{position:"absolute",zIndex:-5},onDuration:function(e){t.playNow.audio.duration=e},onProgress:function(t){e.setState({progress:t})},width:"1px",height:"1px",loop:"song"===this.state.repeat.value,fileConfig:{forceAudio:!0},url:t.playNow.URL,playing:t.isPlay,volume:this.state.volume/100,onEnded:t.getNext}),x.a.createElement(K.a,{type:t.isPlay?"pause-circle":"play-circle",theme:"filled",className:"player-btn__play",onClick:function(){t.switchPlay()}}),x.a.createElement(K.a,{type:"step-backward",theme:"filled",className:"player-btn__step",onClick:t.getPrev}),x.a.createElement(K.a,{type:"step-forward",theme:"filled",className:"player-btn__step",onClick:t.getNext}),x.a.createElement("div",{className:"slider-block"},x.a.createElement("div",{className:"slider-block__meta"},x.a.createElement("div",{className:"slider-block__naming"},x.a.createElement("p",{className:"slider-block__title"},t.playNow.audio.title),t.playNow.audio.author&&x.a.createElement("p",{className:"slider-block__author"},t.playNow.audio.author)),x.a.createElement("p",{className:"slider-block__time"},x.a.createElement("span",null,_e(this.state.progress.playedSeconds),!Ne.isMobile&&" / "+_e(t.playNow.audio.duration)))),x.a.createElement(Fe.a,{className:"slider-block__slider",max:t.playNow.audio.duration,tipFormatter:function(e){return _e(e)},onChange:function(t){e.player.seekTo(Number(t))},value:this.state.progress.playedSeconds})),!Ne.isMobile&&x.a.createElement(Fe.a,{className:"player__volume",max:100,value:this.state.volume,onChange:this.handleChangeVolume}),x.a.createElement("div",{className:"player__additional"},x.a.createElement("div",{className:"shuffle-group"},Ne.isMobile&&this.state.repeat.value?x.a.createElement(E.Fragment,null,x.a.createElement(K.a,{className:"player-btn__repeat ".concat(this.state.repeat.value&&"active"),type:"reload",onClick:function(){e.handleChangeMode("repeat")}}),x.a.createElement("p",{className:"repeat-group__label"},this.state.repeat.title)):x.a.createElement(E.Fragment,null,x.a.createElement(K.a,{className:"player-btn__shuffle ".concat(this.state.shuffle.value&&"active"),type:"swap",onClick:function(){e.handleChangeMode("shuffle")}}),x.a.createElement("p",{className:"repeat-group__label"},this.state.shuffle.title))),!Ne.isMobile&&x.a.createElement("div",{className:"repeat-group"},x.a.createElement(K.a,{className:"player-btn__repeat ".concat(this.state.repeat.value&&"active"),type:"reload",onClick:function(){e.handleChangeMode("repeat")}}),x.a.createElement("p",{className:"repeat-group__label"},this.state.repeat.title))))}}]),t}(x.a.Component))||s)||s,Se=(n(311),n(319)),Pe=n(315),Ce=Object(q.b)("store")(c=Object(q.c)(c=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){localStorage.removeItem("cloudSource"),localStorage.removeItem("id_token"),localStorage.removeItem("access_token"),window.location.href="/"},n.handleChangeDest=function(e){e?n.props.store.FilesStore.fetchFilesAlbum():n.props.store.FilesStore.fetchFiles()},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark(function e(){var t,n,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.store,n=t.FilesStore,a=t.AuthStore,e.t0=a,e.next=4,n.client.getMe();case 4:e.t1=e.sent,e.t0.setUser.call(e.t0,e.t1);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.store.AuthStore;return x.a.createElement("div",{className:"top-bar"},x.a.createElement("div",{className:"top-bar__switch-dest"},x.a.createElement(Se.a,{onChange:this.handleChangeDest,unCheckedChildren:x.a.createElement(K.a,{type:"folder"}),checkedChildren:x.a.createElement("div",{className:"top-bar__switch-dest_icon"})})),x.a.createElement("div",{className:"top-bar__user-icon"},x.a.createElement("p",null,e.user.userName),x.a.createElement(Pe.a,{title:"\u0412\u044b\u0445\u043e\u0434"},x.a.createElement(K.a,{type:"logout",onClick:this.handleLogOut}))))}}]),t}(x.a.Component))||c)||c,ze=Object(q.b)("store")(u=Object(q.c)(u=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).fetchFiles=function(){n.props.store.FilesStore.fetchFiles()},n.playFile=function(e){n.props.store.FilesStore.playFile(e)},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark(function e(){var t,n,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=this.props.store,a=n.AuthStore,n.FilesStore,t.location.hash||(a.OAuthPassed?t.history.push("/"):t.history.push("/auth"));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.store,t=e.FilesStore,n=e.AuthStore;return x.a.createElement("div",{className:"main-container"},x.a.createElement(L.a,null,x.a.createElement(U.a,{path:"/auth"},x.a.createElement(we,null)),x.a.createElement(U.a,{path:"/"},n.OAuthPassed?x.a.createElement(E.Fragment,null,x.a.createElement(Ce,null),x.a.createElement(Ae,null),x.a.createElement("div",{style:{marginTop:"12px"}},x.a.createElement(te,{files:t.files,fetchFiles:this.fetchFiles,playFile:this.playFile}))):x.a.createElement(je.a,null))))}}]),t}(x.a.Component))||u)||u,Ie=Object(B.a)(ze),De=n(324),Me=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return x.a.createElement(De.a,null,x.a.createElement("div",{className:"App"},x.a.createElement(Ie,null)))}}]),t}(E.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le,Ue,Be,Te,Re,Ge,qe,Je,Ve,We,$e,He,Ke,Qe,Xe,Ye,Ze,et,tt,nt,at,rt,it,lt,ot,st,ct,ut,ht,ft,pt=new(h=be.d.bound,f=be.d.bound,p=be.d.bound,b=be.d.bound,m=function e(){Object(A.a)(this,e),Object(fe.a)(this,"OAuthUrl",d,this),Object(fe.a)(this,"OAuthToken",v,this),Object(fe.a)(this,"OAuthPassed",O,this),Object(fe.a)(this,"loading",y,this),Object(fe.a)(this,"user",g,this),Object(fe.a)(this,"setIsAuthed",w,this),Object(fe.a)(this,"setNotAuthed",j,this),Object(fe.a)(this,"setLoading",k,this),Object(fe.a)(this,"setUser",F,this)},d=Object(pe.a)(m.prototype,"OAuthUrl",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(pe.a)(m.prototype,"OAuthToken",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=Object(pe.a)(m.prototype,"OAuthPassed",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=Object(pe.a)(m.prototype,"loading",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=Object(pe.a)(m.prototype,"user",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ve("")}}),w=Object(pe.a)(m.prototype,"setIsAuthed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.OAuthPassed=!0}}}),j=Object(pe.a)(m.prototype,"setNotAuthed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.OAuthPassed=!1}}}),k=Object(pe.a)(m.prototype,"setLoading",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.loading=t}}}),F=Object(pe.a)(m.prototype,"setUser",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),m),bt=new function e(){Object(A.a)(this,e)},mt=new(Le=be.d.bound,Ue=be.d.bound,Be=be.d.bound,Te=be.d.bound,Re=be.d.bound,Ge=be.d.bound,qe=be.d.bound,Je=be.d.bound,Ve=be.d.bound,We=be.d.bound,$e=be.d.bound,He=be.d.bound,Ke=function e(){Object(A.a)(this,e),Object(fe.a)(this,"files",Qe,this),Object(fe.a)(this,"sourceCloud",Xe,this),Object(fe.a)(this,"client",Ye,this),Object(fe.a)(this,"playNow",Ze,this),Object(fe.a)(this,"isPlay",et,this),Object(fe.a)(this,"setCloud",tt,this),Object(fe.a)(this,"setClient",nt,this),Object(fe.a)(this,"fetchFiles",at,this),Object(fe.a)(this,"fetchFilesAlbum",rt,this),Object(fe.a)(this,"playFile",it,this),Object(fe.a)(this,"setNowDuration",lt,this),Object(fe.a)(this,"play",ot,this),Object(fe.a)(this,"pause",st,this),Object(fe.a)(this,"switchPlay",ct,this),Object(fe.a)(this,"getNext",ut,this),Object(fe.a)(this,"getPrev",ht,this),Object(fe.a)(this,"setMode",ft,this)},Qe=Object(pe.a)(Ke.prototype,"files",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=Object(pe.a)(Ke.prototype,"sourceCloud",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ye=Object(pe.a)(Ke.prototype,"client",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=Object(pe.a)(Ke.prototype,"playNow",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new de(new me("","","",0,""),"","")}}),et=Object(pe.a)(Ke.prototype,"isPlay",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt=Object(pe.a)(Ke.prototype,"setCloud",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.sourceCloud=t}}}),nt=Object(pe.a)(Ke.prototype,"setClient",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.client=t}}}),at=Object(pe.a)(Ke.prototype,"fetchFiles",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(M.a)(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.getAllFiles();case 2:e.files=t.sent;case 3:case"end":return t.stop()}},t,this)}))}}),rt=Object(pe.a)(Ke.prototype,"fetchFilesAlbum",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(M.a)(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.files){t.next=6;break}return t.next=3,e.client.getAllFilesAlbums();case 3:e.files=t.sent,t.next=11;break;case 6:return t.next=8,e.client.getAllFiles();case 8:return t.next=10,e.client.getAllFilesAlbums();case 10:e.files=t.sent;case 11:case"end":return t.stop()}},t,this)}))}}),it=Object(pe.a)(Ke.prototype,"playFile",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(M.a)(D.a.mark(function t(n){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.client.playFile(n).then(function(t){e.playNow=t,e.isPlay=!0});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}),lt=Object(pe.a)(Ke.prototype,"setNowDuration",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.playNow.audio.duration=t}}}),ot=Object(pe.a)(Ke.prototype,"play",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPlay=!0}}}),st=Object(pe.a)(Ke.prototype,"pause",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPlay=!1}}}),ct=Object(pe.a)(Ke.prototype,"switchPlay",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPlay=!e.isPlay}}}),ut=Object(pe.a)(Ke.prototype,"getNext",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.client.getNext(e.playNow.fullPath).then(function(t){e.isPlay=!0,e.playNow=t})}}}),ht=Object(pe.a)(Ke.prototype,"getPrev",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.client.getPrev(e.playNow.fullPath).then(function(t){e.isPlay=!0,e.playNow=t})}}}),ft=Object(pe.a)(Ke.prototype,"setMode",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.client.checkspace=n,e.client.mode=t}}}),Ke),dt=new function e(){Object(A.a)(this,e),this.AuthStore=pt,this.CommonStore=bt,this.FilesStore=mt};window.store=dt,N.a.render(x.a.createElement(q.a,{store:dt},x.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[168,2,1]]]);
//# sourceMappingURL=main.f111db0c.chunk.js.map